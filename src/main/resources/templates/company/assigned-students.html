<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>My Students</title>
    <link rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-5">
    <h3>ðŸ“‹ Trainees of the Company</h3>

    
    <div th:if="${successMessage}" class="alert alert-success" role="alert">
        <p th:text="${successMessage}"></p>
    </div>

    <table class="table table-striped mt-4">
        <thead>
            <tr>
                <th>Fullname</th>
                <th>Username</th>
                <th>Evaluation</th>
                <th>Actions</th>
            </tr>
        </thead>
        <!-- Î’ÎµÎ²Î±Î¹Ï‰Î½ÏŒÎ¼Î±ÏƒÏ„Îµ ÏŒÏ„Î¹ Î¿ Ï€Î¯Î½Î±ÎºÎ±Ï‚ Î´ÎµÎ½ Î¸Î± Ï€ÏÎ¿ÏƒÏ€Î±Î¸Î®ÏƒÎµÎ¹ Î½Î± ÏƒÏ‡ÎµÎ´Î¹Î±ÏƒÏ„ÎµÎ¯ Î±Î½ Î· Î»Î¯ÏƒÏ„Î± ÎµÎ¯Î½Î±Î¹ ÎºÎµÎ½Î® -->
        <tbody th:if="${not #lists.isEmpty(positions)}">
            <!-- Î— Î¼ÎµÏ„Î±Î²Î»Î·Ï„Î® ÎµÏ€Î±Î½Î¬Î»Î·ÏˆÎ·Ï‚ ÎµÎ¯Î½Î±Î¹ 'pos', Ï€Î¿Ï… ÎµÎ¯Î½Î±Î¹ Î±Î½Ï„Î¹ÎºÎµÎ¯Î¼ÎµÎ½Î¿ TraineeshipPosition -->
            <tr th:each="pos : ${positions}">
            
                <!-- Î‘Ï…Ï„Î¬ Ï„Î± Ï€ÎµÎ´Î¯Î± Ï€Î±Î¯ÏÎ½Î¿Ï…Î½ Î´ÎµÎ´Î¿Î¼Î­Î½Î± Î±Ï€ÏŒ Ï„Î¿ Î±Î½Ï„Î¹ÎºÎµÎ¯Î¼ÎµÎ½Î¿ 'student' Ï€Î¿Ï… Ï€ÎµÏÎ¹Î­Ï‡ÎµÏ„Î±Î¹ ÏƒÏ„Î¿ 'pos' -->
                <td th:text="${pos.student.fullName}">Fullname</td>
                <td th:text="${pos.student.username}">Username</td>
                
                <td>
                    <!-- 
                        Î”ÎµÎ´Î¿Î¼Î­Î½Î¿Ï… ÏŒÏ„Î¹ Î¿ controller ÏƒÏ„Î­Î»Î½ÎµÎ¹ Î¼ÏŒÎ½Î¿ Î±Î½Î±Ï„ÎµÎ¸ÎµÎ¹Î¼Î­Î½ÎµÏ‚ Î¸Î­ÏƒÎµÎ¹Ï‚,
                        Î±Ï…Ï„Î® Î· ÏƒÏ…Î½Î¸Î®ÎºÎ· th:if ÎµÎ¯Î½Î±Î¹ Ï€Î¬Î½Ï„Î± Î±Î»Î·Î¸Î®Ï‚. ÎœÏ€Î¿ÏÎµÎ¯ ÎºÎ±Î¹ Î½Î± Î±Ï†Î±Î¹ÏÎµÎ¸ÎµÎ¯.
                    -->
                    <div th:if="${pos.student != null}">
                        <!-- 
                            Î”Î™ÎŸÎ¡Î˜Î©Î£Î—: Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î¿ÏÎ¼Îµ 'pos.student.id' ÎºÎ±Î¹ 'pos.id'
                            Î³Î¹Î± Î½Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î®ÏƒÎ¿Ï…Î¼Îµ Ï„Î¿ ÏƒÏ‰ÏƒÏ„ÏŒ URL.
                        -->
                        <a th:href="@{/company/evaluation/{studentId}/{positionId}(
                                        studentId=${pos.student.id},
                                        positionId=${pos.id}
                                   )}"
                           class="btn btn-success btn-sm">
                           Evaluation
                        </a>
                    </div>
                </td>
                
                <td>
                    <!-- 
                        Î”Î™ÎŸÎ¡Î˜Î©Î£Î—: Î¤Î¿ action Ï„Î·Ï‚ Ï†ÏŒÏÎ¼Î±Ï‚ Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Î±Î½Î±Ï†Î­ÏÎµÏ„Î±Î¹ ÏƒÏ„Î¿ ID Ï„Î¿Ï… Ï†Î¿Î¹Ï„Î·Ï„Î®
                        Ï€Î¿Ï… Î¸Î­Î»Î¿Ï…Î¼Îµ Î½Î± Î±Ï†Î±Î¹ÏÎ­ÏƒÎ¿Ï…Î¼Îµ, Ï„Î¿ Î¿Ï€Î¿Î¯Î¿ Ï€Î±Î¯ÏÎ½Î¿Ï…Î¼Îµ Î±Ï€ÏŒ 'pos.student.id'.
                    -->
                    <form th:action="@{/company/remove/{id}(id=${pos.student.id})}"
                          method="post" style="display:inline">
                        <button class="btn btn-danger btn-sm" type="submit"
                                onclick="return confirm('Are you sure you want to remove this student?');">
                            Delete
                        </button>
                    </form>
                </td>
            </tr>
        </tbody>
    </table>
    
    <!-- ÎœÎ®Î½Ï…Î¼Î± Ï€Î¿Ï… ÎµÎ¼Ï†Î±Î½Î¯Î¶ÎµÏ„Î±Î¹ Î¼ÏŒÎ½Î¿ Î±Î½ Î´ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Ï†Î¿Î¹Ï„Î·Ï„Î­Ï‚ -->
    <div th:if="${#lists.isEmpty(positions)}">
        <p class="text-center text-muted mt-4">No assigned students found.</p>
    </div>

    <a th:href="@{/company/dashboard}" class="btn btn-secondary mt-3">
        â¬… Back to Dashboard
    </a>
</div>
</body>
</html>